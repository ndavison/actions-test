name: E2E Performance Tests (Desktop)

on:
  pull_request:
    branches: [ main ]
    types:
        - labeled

jobs:
  build:
    if: ${{ github.event.label.name == 'Run E2E Performance Tests' }}
    runs-on: ubuntu-latest

    steps:

    - name: Add start comment
      uses: actions/github-script@v6
      with:
        script: |
            github.rest.issues.createComment({
                issue_number: context.issue.number,
                owner: context.repo.owner,
                repo: context.repo.repo,
                body: `E2E Performance Tests started üèéÔ∏è`,
            });

    - uses: actions/checkout@v2

    - name: Upload report to S3
      run: echo s3://xxx/${{ github.head_ref }}-${{ github.sha }}.json

    - name: Remove "Run E2E Performance Tests" label
      if: always()
      uses: actions-ecosystem/action-remove-labels@v1
      with:
          labels: |
            Run E2E Performance Tests
